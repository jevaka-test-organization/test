# Change only-cklewin-and-testuser9891 to animal-release-management
# Uncomment status-success for SonarCloud & mergefreeze
# What exactly is the "strict: true" option for?
pull_request_rules:
  - name: Merge master into develop
    conditions:
      - base=develop
      - head=master
      - -conflict
      - 'status-success=ci/circleci: build'
      # - status-success=SonarCloud Code Analysis
      # - status-success=mergefreeze
      - author=@only-cklewin-and-testuser9891
    actions:
      review:
        type: APPROVE
        message: Auto merge conditions satisfied
      merge:
        method: merge
  - name: Merge alpha release stub into develop
    conditions:
      - base=develop
      - head~=^meta/([0-9\.])*-alpha$
      - -conflict
      - author=@only-cklewin-and-testuser9891
      - 'status-success=ci/circleci: build'
      # - status-success=SonarCloud Code Analysis
      # - status-success=mergefreeze
    actions:
      review:
        type: APPROVE
        message: Auto merge conditions satisfied
      merge:
        method: merge
        strict: true
  - name: Delete head branch after merge
    conditions:
      - head!=master
      - head!=develop
      - head~=^meta/([0-9\.])*-alpha$
      - merged
    actions:
      delete_head_branch: {}
