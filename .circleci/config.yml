version: 2.1

jobs:
  check_sensitive_updates:
    docker:
      - image: circleci/buildpack-deps

    steps:
      - checkout

      - run:
          name: Sensitive files unchanged
          command: |
            git checkout develop
            git branch
            git pull
            git checkout feature/reset-workflow
            git pull
            git branch
            git status
            git diff develop
            git diff --quiet --exit-code develop:.github feature/reset-workflow:.github
            echo $?
            git diff --quiet --exit-code develop:.github HEAD:.github
            echo $?
            git diff --quiet --exit-code develop:.github HEAD:.github

  build:
    docker:
      - image: debian:stretch

    steps:
      - checkout

      - run:
          name: Greeting
          command: echo Hello, world.

      - run:
          name: Print the Current Time
          command: date

workflows:
  test_workflow:
    jobs:
      - check_sensitive_updates
      - build
